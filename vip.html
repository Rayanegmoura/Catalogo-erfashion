<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acesso VIP | Exclusive ER FASHION</title>

    <link href="https://fonts.googleapis.com/css2?family=Zain:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <script>
        async function monitorarStatusVip() {
            try {
                const resposta = await fetch('produtos.json');
                const dados = await resposta.json();

                const agora = new Date();
                const horaAtual = agora.getHours();
                const minAtual = agora.getMinutes();
                const segAtual = agora.getSeconds();

                // 1. Bloqueio de Manutenção
                if (dados.site_em_manutencao === true) {
                    window.location.href = 'manutencao.html';
                    return;
                }

                // 2. Se o Modo VIP for desligado manual no JSON, vai pra loja
                if (dados.modo_vip === false) {
                    window.location.href = 'index.html';
                    return;
                }

                // 3. Lógica do Cronômetro vs Campo de Senha
                const horaAlvo = dados.hora_inicio_vip; // Ex: 21

                if (horaAtual < horaAlvo) {
                    // AINDA NÃO É HORA: Calcula tempo restante
                    const h = (horaAlvo - 1) - horaAtual;
                    const m = 59 - minAtual;
                    const s = 59 - segAtual;

                    document.getElementById('countdown').innerText =
                        `${String(h).padStart(2, '0')}:${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}`;

                    document.getElementById('timer-container').style.display = 'block';
                    document.getElementById('senha-container').style.display = 'none';
                } else {
                    // CHEGOU A HORA: Libera o campo de senha
                    document.getElementById('timer-container').style.display = 'none';
                    document.getElementById('senha-container').style.display = 'block';
                    document.getElementById('vip-titulo').innerText = "Área VIP";
                    document.getElementById('status-tag').innerText = "ACESSO LIBERADO";
                    document.getElementById('main-icon').className = "bi bi-shield-lock icon-lock";
                }

            } catch (e) {
                console.error("Erro ao monitorar status");
            }
        }

        // Roda a cada 1 segundo para o relógio ser fluido
        monitorarStatusVip();
        setInterval(monitorarStatusVip, 1000);
    </script>

    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #f7f2eb, #f3ede6);
            font-family: 'Zain', 'Segoe UI', sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            color: #202020;
        }

        .box {
            width: 100%;
            max-width: 420px;
            background: #ffffff;
            padding: 50px 40px;
            border-radius: 28px;
            border: 1px solid #e6d8c3;
            box-shadow: 0 20px 45px rgba(0, 0, 0, .08);
            text-align: center;
        }

        .icon-lock {
            font-size: 2.6rem;
            color: #d6b98c;
            margin-bottom: 12px;
            display: block;
        }

        .tag-editorial {
            display: inline-block;
            margin-bottom: 18px;
            padding: 6px 14px;
            font-size: 0.65rem;
            letter-spacing: 2px;
            border-radius: 12px;
            background: #f2d9c3;
            color: #202020;
        }

        h1 {
            font-size: 2rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        p {
            font-size: 0.95rem;
            color: #666;
            margin-bottom: 28px;
            line-height: 1.5;
        }

        input {
            width: 100%;
            padding: 14px;
            border-radius: 14px;
            border: 1px solid #e6d8c3;
            background: transparent;
            font-size: 1rem;
            text-align: center;
            margin-bottom: 16px;
            outline: none;
        }

        input::placeholder {
            color: #aaa;
        }

        button {
            width: 100%;
            padding: 14px;
            border-radius: 50px;
            border: none;
            cursor: pointer;
            font-size: 0.9rem;
            letter-spacing: 1px;
            background: linear-gradient(90deg, #f2d9c3, #d6b98c);
            color: #202020;
            transition: .35s;
        }

        button:hover {
            opacity: 0.85;
            transform: scale(1.03);
        }

        #erro {
            margin-top: 22px;
            display: none;
        }

        .msg-erro-titulo {
            font-size: 0.8rem;
            color: #b80000;
            display: block;
            margin-bottom: 12px;
            font-weight: 600;
        }

        .convite-vip {
            font-size: 0.75rem;
            color: #666;
            border-top: 1px dashed #e6d8c3;
            padding-top: 14px;
        }

        .link-whats {
            display: inline-block;
            margin-top: 6px;
            font-weight: 600;
            color: #c7a15a;
            text-decoration: none;
        }

        .link-whats:hover {
            text-decoration: underline;
        }

        @keyframes shake {
            0% {
                transform: translateX(0);
            }

            25% {
                transform: translateX(-6px);
            }

            50% {
                transform: translateX(6px);
            }

            75% {
                transform: translateX(-6px);
            }

            100% {
                transform: translateX(0);
            }
        }

        @media (max-width: 480px) {
            .box {
                padding: 36px 26px;
                border-radius: 22px;
            }

            h1 {
                font-size: 1.7rem;
            }

            p {
                font-size: 0.85rem;
            }
        }
    </style>
</head>

<body>

    <div class="box">
        <i class="bi bi-clock-history icon-lock" id="main-icon"></i>
        <span class="tag-editorial" id="status-tag">LANÇAMENTO EM BREVE</span>

        <h1 id="vip-titulo">Contagem Regressiva</h1>

        <div id="timer-container">
            <p>A nova coleção será liberada para o grupo VIP em:</p>
            <div id="countdown"
                style="font-size: 2.2rem; font-weight: 700; color: #202020; margin-bottom: 25px; letter-spacing: 2px;">
                00:00:00
            </div>
            <span style="font-size:0.65rem; color:#999;">
                Acesso antecipado • Quantidades limitadas
            </span>

        </div>

        <div id="senha-container" style="display: none;">
            <p>Digite sua chave exclusiva para acessar a nova coleção.</p>
            <input type="password" id="senha" placeholder="Digite sua chave VIP" inputmode="text">
            <button onclick="entrar()">LIBERAR ACESSO</button>
        </div>

        <div id="erro">
            <span class="msg-erro-titulo">Chave inválida</span>
            <div class="convite-vip">
                Quer receber a próxima coleção em primeira mão?<br>
                <a href="https://wa.me/5521987209252?text=Oi!+Quero+fazer+parte+do+grupo+VIP" target="_blank"
                    class="link-whats">
                    Solicite seu acesso VIP agora!
                </a>
            </div>
        </div>
    </div>

    <script>
        async function entrar() {
            const senhaInput = document.getElementById('senha');
            const erroDiv = document.getElementById('erro');
            const box = document.querySelector('.box');

            try {
                const resposta = await fetch('produtos.json', { cache: "no-store" });
                if (!resposta.ok) throw new Error("JSON não carregou");

                const dados = await resposta.json();

                if (senhaInput.value === dados.senha_vip) {
                    sessionStorage.setItem('acesso_vip_concedido', 'true');
                    window.location.href = 'index.html';
                } else {
                    erroDiv.style.display = 'block';
                    senhaInput.value = '';
                    box.style.animation = 'shake 0.4s ease';
                    setTimeout(() => box.style.animation = '', 400);
                }

            } catch (erro) {
                console.error("Erro ao validar acesso:", erro);
                alert("Erro técnico ao verificar acesso.");
            }
        }

        document.getElementById('senha').addEventListener('keydown', function (e) {
            if (e.key === 'Enter') entrar();
        });
    </script>

</body>

</html>